/*!
 * Plugin for lazy loading images
 *
 * @link https://github.com/nechehin/lazyload
 */
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof module&&module.exports?module.exports=function(f,e){void 0===e&&(e="undefined"!==typeof window?require("jquery"):require("jquery")(f));b(e);return e}:b(jQuery)})(function(b){var f=b(window),e=f.width(),g=f.height();f.on("resize",function(){e=f.width();g=f.height()});b.fn.lazyload=function(c){function a(){d.pageYOffset=window.pageYOffset;d.pageXOffset=window.pageXOffset;var a=0;e.each(function(){var c=b(this);
    if(!(d.skip_invisible&&!c.is(":visible")||b.abovethetop(this,d)||b.leftofbegin(this,d)))if(!b.belowthefold(this,d)&&!b.rightoffold(this,d))c.trigger("appear"),a=0;else if(++a>d.failure_limit)return!1})}var e=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,allowIntersectionMode:!0,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",pageXOffset:!1,pageYOffset:!1};
    c&&(void 0!==c.failurelimit&&(c.failure_limit=c.failurelimit,delete c.failurelimit),void 0!==c.effectspeed&&(c.effect_speed=c.effectspeed,delete c.effectspeed),b.extend(d,c));var h=d.allowIntersectionMode&&"IntersectionObserver"in window&&0===d.event.indexOf("scroll");if(h){c={};d.container!==window&&(c.root="undefined"===typeof d.container[0]?d.container:d.container[0]);var g=new IntersectionObserver(function(b){[].forEach.call(b,function(b){if("undefined"===typeof b.isIntersecting||!1!==b.isIntersecting){var a=
        b.target;b=new Image;var c=a.getAttribute("data-"+d.data_attribute);b.onload=function(){a.src=c;a.loaded=!0};b.src=c;g.unobserve(a)}})},c);"function"===typeof console.info&&console.info("lazyload: intersection mode")}else var k=void 0===d.container||d.container===window?f:b(d.container);if(0===d.event.indexOf("scroll")&&!h)k.on(d.event,function(){return a()});this.each(function(){var a=this;a.loaded=!1;null===a.getAttribute("src")&&"IMG"===a.tagName&&(a.src=d.placeholder);if(h)g.observe(a);else{var c=
        b(a);c.one("appear",function(){if(!this.loaded){d.appear&&d.appear.call(a,e.length,d);var c=new Image;c.onload=function(){var c=a.getAttribute("data-"+d.data_attribute);"IMG"===a.tagName?a.src=c:a.style.backgroundImage="url("+c+")";a.loaded=!0;c=b.grep(e,function(a){return!a.loaded});e=b(c);d.load&&d.load.call(a,e.length,d)};c.src=a.getAttribute("data-"+d.data_attribute)}});0!==d.event.indexOf("scroll")&&a.addEventListener(d.event,function(){a.loaded||c.trigger("appear")})}});if(!h){window.addEventListener("resize",
        function(){a()});if(/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion))f.on("pageshow",function(a){a.originalEvent&&a.originalEvent.persisted&&e.each(function(){b(this).trigger("appear")})});b(function(){a()})}return this};b.belowthefold=function(c,a){return(void 0===a.container||a.container===window?g+a.pageYOffset:b(a.container).offset().top+b(a.container).height())<=b(c).offset().top-a.threshold};b.rightoffold=function(c,a){return(void 0===a.container||a.container===window?e+a.pageXOffset:
    b(a.container).offset().left+b(a.container).width())<=b(c).offset().left-a.threshold};b.abovethetop=function(c,a){return(void 0===a.container||a.container===window?a.pageYOffset:b(a.container).offset().top)>=b(c).offset().top+a.threshold+c.clientHeight};b.leftofbegin=function(c,a){return(void 0===a.container||a.container===window?a.pageXOffset:b(a.container).offset().left)>=b(c).offset().left+a.threshold+c.clientWidth}});
